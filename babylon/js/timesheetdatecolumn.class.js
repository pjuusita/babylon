

function TimeSheetDateColumn(name,fromColumn,dateFormat,showDoubles) {
	
	this.name			= name;
	this.dateFormat 	= dateFormat;
	this.date 			= new TimeSheetDate('0000-00-00',dateFormat);
	this.domElement 	= null;
	this.fromColumn 	= fromColumn;
	this.showDoubles 	= showDoubles;
		
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION FINALIZE()
	//*** Finalizes object.
	//********************************************************************************************************************************************************
 
	this.finalize = function() {
		
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETVALUE()
	//*** Returns object's value.
	//********************************************************************************************************************************************************
	
	this.getValue = function() {
		var date = this.date;
		return date.dateString;
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETSELECTEDOBJECT()
	//*** Returns this.date.
	//********************************************************************************************************************************************************
	
	this.getSelectedObject = function() {
		
		return this.date
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETNAME()
	//*** Returns object's name.
	//********************************************************************************************************************************************************

	this.getName = function() {
		return this.name;
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETCOPY()
	//*** Returns object's name.
	//********************************************************************************************************************************************************

	this.getCopy = function() {
		
		var date = this.date;
		
		var newDate = new TimeSheetDate(date.dateString,date.dateFormat);
		
		return newDate;
		
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION SETCOPY(COPY)
	//*** Sets copied date as value.
	//********************************************************************************************************************************************************

	this.setCopy = function(newDate) {
		
		this.date = new TimeSheetDate(newDate.dateString,newDate.dateFormat);
		
	};
	
	 
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION SETDISABLED(ISDISABLED)
	//*** Sets if domElement is active or not.
	//********************************************************************************************************************************************************
	
	this.setDisabled = function(isDisabled) {
		
		var domElement = this.getDomElement();
		domElement.disabled = isDisabled;
		
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETDOMELEMENT()
	//*** Returns DOM-element tied to object.
	//********************************************************************************************************************************************************

	this.getDomElement = function() {
		return this.domElement;
	};

	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETCLASS()
	//*** Returns object's class as string.
	//********************************************************************************************************************************************************

	this.getClass = function() {
		return 'TimeSheetDateColumn';
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETDATE()
	//*** Returns encapsulated date.
	//********************************************************************************************************************************************************

	this.getDate = function() {
		return this.date;
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETFROMCOLUMN()
	//*** Returns datavariable name of row-class column where from to fetch value.
	//********************************************************************************************************************************************************

	this.getFromColumn= function() {
		return this.fromColumn;
	};

	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION SETVALUE(dateString,dateFormat)
	//*** Sets value with dateString,dateFormat.
	//********************************************************************************************************************************************************

	this.setValue = function(dateString,dateFormat) {
		
		var domElement = this.domElement;
		this.date = new TimeSheetDate(dateString,dateFormat);
		domElement.innerHTML = this.date.toInnerHTML();
	};
		
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION CREATEVENTLISTENERS()
	//*** Creates eventlisteners.
	//********************************************************************************************************************************************************
	
	this.createEventListeners = function() {
		
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION CREATEDOMELEMENT()
	//*** Creates DOM-element tied to object.
	//********************************************************************************************************************************************************
	
	this.createDomElement = function() {
		this.domElement = this.createTimeSheetDateElement(this);
		return this.domElement;
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION CREATETIMESHEETDATEELEMENT(COLUMN)
	//*** Creates the actual DOM-element for object.
	//********************************************************************************************************************************************************

	this.createTimeSheetDateElement = function(column) {
		
		var date	= this.date;
		
		var table	= document.createElement('table');
		var row 	= table.insertRow();
		var cell 	= row.insertCell();
		
		cell.innerHTML = date.toInnerHTML();
		
		return table;
		
	};
	
}

//********************************************************************************************************************************************************
//*** OBJECT TIMESHEETDATE(DATESTRING,DATEFORMAT)
//*** Creates TimeSheetDate-object.
//********************************************************************************************************************************************************

function TimeSheetDate(dateString,dateFormat) {
	
	// dayName is setted at the bottom of the code to circumvent object creation order.

	var splitted = dateString.split('-');
	
	this.year	 = splitted[0];
	this.month	 = splitted[1];
	this.day	 = splitted[2];

	this.dateString = dateString;
	this.dateFormat = dateFormat;
	this.jsdate		= new Date(dateString);
	this.dayNumber	= this.jsdate.getDay();
	this.dayName	= "";
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETDAY()
	//*** Returns day contained in the object.
	//********************************************************************************************************************************************************
	
	this.getDay = function() {
		return this.day;
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETDAYNUMBER()
	//*** Returns daynumber contained in the object.
	//********************************************************************************************************************************************************
	
	this.getDayNumber = function() {
		return this.dayNumber;
	};


	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION TOSTRING()
	//*** Returns string presentation of object.
	//********************************************************************************************************************************************************

	this.toString = function() {
		
		var dateFormat	 = this.dateFormat;
		var outputString = '';
		
		switch(dateFormat) {
		
			case 'dn.d.m' :
				outputString = this.dayName + ' ' + this.day + '.' +  this.month;
				break;
				
			case 'hidden' :
				outputString = '';
				break;
		}
	
		return outputString;
		
	};

	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION TOINNERHTML()
	//*** Returns HTML-presentation of the object.
	//********************************************************************************************************************************************************
	
	this.toInnerHTML = function() {
		
		var dateFormat	 = this.dateFormat;
		var innerHTML = '';
		
		switch(dateFormat) {
		
			case 'dn.d.m' :
				innerHTML = '<table style=\'width:100px\'><td style=\'width:25px\'>' + this.dayName + '</td><td>' + this.day + '.' +  this.month + '</td></table>';
				break;
		}
	
		return innerHTML;
	
	};

	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETMONTH()
	//*** Returns month contained in the object.
	//********************************************************************************************************************************************************

	this.getMonth = function() {
		return this.month;
	};

	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETYEAR()
	//*** Returns year contained in the object.
	//********************************************************************************************************************************************************
	
	this.getYear = function() {
		return this.year;
	};

	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETDAYNAME()
	//*** Returns string representation of dayNumber.
	//********************************************************************************************************************************************************

	this.getDayName = function() {
		
		var dayNumber = this.dayNumber;
		
		var dayNames = [];
		
		dayNames[0] = 'Ma';
		dayNames[1] = 'Ti';
		dayNames[2] = 'Ke';
		dayNames[3] = 'To';
		dayNames[4] = 'Pe';
		dayNames[5] = 'La';
		dayNames[6] = 'Su';
		
		return dayNames[dayNumber];
		
	};
	
	//********************************************************************************************************************************************************
	//*** OBJECT FUNCTION GETCLASS()
	//*** Returns class as string.
	//********************************************************************************************************************************************************
	
	this.getClass = function() {
		
		return 'TimeSheetDate';
		
	};

	//********************************************************************************************************************************************************
	//*** OBJECT MINIMAIN
	//*** Minimain.
	//********************************************************************************************************************************************************
	
	this.dayName	= this.getDayName();
}